begin(T1)
W(T1,x2,90)
fail(1)
end(T1)
begin(T2)
W(T2,x4,100)
end(T2)
fail(2)
fail(3)
fail(4)
fail(5)
fail(6)
fail(7)
fail(8)
fail(9)
fail(10)
begin(T3)
W(T3,x1,33)
recover(2)
begin(T4)
W(T4,x8,22)
end(T4)
end(T3)
dump()

// In this case, first T1 would abort as site 1 goes down. T2 will write x4 to all the sites except 1 and commit. Rest all of the sites go down and T3 starts, T3 writes value to non-replicated variable x1 and so we store the command to be executed when the site recovers. Site 2 recovers and T3 acquires the lock for x1 and writes to it. T4 begins and writes to replicated variable. x2 on site 2 writes to x8 and all other sites will not be able to read this variable once they recover, unless the variables are written to, by some other transaction.